# How Console IO is done in XV6

When we setup it up and run `make qemu`, we get into the unix shell like environment.

But how doe this terminal thing work?

First of all, when you run `make qemu`, what actually happen underneath is `qemu-system-riscv64 -machine virt ...`, where virt is a ["RISC-V machine with 16550a UART and VirtIO MMIO"][https://github.com/qemu/qemu/blob/master/hw/riscv/virt.c#L6]. When QEMU emulates a RISC-V `virt` virtual machine, and one of the key components of this emulation is the virtual machine’s serial console or UART (Universal Asynchronous Receiver/Transmitter) interface. 

By default, QEMU maps this UART to the standard input (stdin) and output (stdout) of the host system terminal from which you started QEMU, allowing the host terminal to function as the virtual machine’s console. This way, any output the virtual machine would send to its UART is sent to your host’s terminal window, and any input you provide through the host terminal is sent to the virtual machine.

Now we can focus on xv6 side.

When the first core gets started and jumps into main(), the very first thing it does is to init the console:

<img width="493" alt="image" src="https://github.com/user-attachments/assets/777050f3-5dae-4f95-8ac1-717c3edbf042">

<img width="372" alt="image" src="https://github.com/user-attachments/assets/cbcb0c26-7ca4-4f89-b7a5-10c48f6ca316">

<img width="453" alt="image" src="https://github.com/user-attachments/assets/abe2dfa5-dbae-443c-a4aa-bdf419562a4c">
